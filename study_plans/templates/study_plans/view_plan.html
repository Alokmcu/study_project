{% extends "study_plans/dashboard_base.html" %}
{% block title %}View Study Plan - StudyTracks{% endblock %}

{% block content %}
<div class="container my-4">
    <h2 class="text-primary mb-3">ðŸ“– {{ plan.subject }} - Class {{ plan.class_name }}</h2>
    <p>Total Days: {{ plan.total_days }} | Created on: {{ plan.created_at|date:"d M, Y" }}</p>

    <form method="POST">
        {% csrf_token %}
        <div class="plans-grid">
            {% for day in days %}
            <div class="plan-card {% if day.is_completed %}completed{% endif %}">
                <div class="d-flex justify-content-between align-items-center">
                    <strong>Day {{ day.day_number }}</strong>
                    <input type="checkbox" name="completed" value="{{ day.id }}" {% if day.is_completed %}checked{% endif %}>
                </div>
                <p class="topic">{{ day.topic }}</p>
            </div>
            {% empty %}
            <p>No topics found. Please create a plan first.</p>
            {% endfor %}
        </div>

        <div class="mt-3 d-flex gap-2">
            <button type="submit" class="btn btn-success">Update Progress âœ…</button>
            <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary">â¬… Back to Dashboard</a>
        </div>
    </form>
</div>

<style>
.plans-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 20px;
}
.plan-card {
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.05);
    transition: transform 0.2s, box-shadow 0.2s;
}
.plan-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}
.plan-card.completed {
    background: #d4edda;
    text-decoration: line-through;
    opacity: 0.9;
}
.topic {
    margin-top: 10px;
}
</style>
{% endblock %}
